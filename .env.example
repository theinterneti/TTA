# TTA Live Database Configuration
# This file configures the TTA system to use live Redis and Neo4j databases
# instead of mock services for production-ready deployment.

# ============================================================================
# DATABASE SERVICE CONFIGURATION
# ============================================================================

# Enable live database services (disable mocks)
TTA_USE_MOCKS=false
TTA_DEVELOPMENT_MODE=false
TTA_USE_NEO4J=1
TTA_USE_REDIS=1

# ============================================================================
# NEO4J DATABASE CONFIGURATION
# ============================================================================

# Neo4j Connection Settings
NEO4J_URI=bolt://localhost:7687
NEO4J_URL=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_USER=neo4j
NEO4J_PASSWORD=TTA_Neo4j_2024!

# Neo4j Database Settings
NEO4J_DATABASE=tta_therapeutic_gaming
NEO4J_MAX_CONNECTION_LIFETIME=3600
NEO4J_MAX_CONNECTION_POOL_SIZE=50
NEO4J_CONNECTION_ACQUISITION_TIMEOUT=60

# Neo4j Performance Settings
NEO4J_QUERY_TIMEOUT=30
NEO4J_TRANSACTION_TIMEOUT=60
NEO4J_CONNECTION_TIMEOUT=10

# ============================================================================
# REDIS CACHE CONFIGURATION
# ============================================================================

# Redis Connection Settings
REDIS_URL=redis://:TTA_Redis_2024!@localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=TTA_Redis_2024!
REDIS_DB=0

# Redis Connection Pool Settings
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true

# Redis Database Allocation
REDIS_SESSION_DB=0          # Session data and user authentication
REDIS_CHARACTER_DB=1        # Character and world caching
REDIS_CHAT_DB=2            # Real-time chat and WebSocket data
REDIS_PROGRESS_DB=3        # Progress tracking and analytics
REDIS_METRICS_DB=4         # Therapeutic metrics and outcomes
REDIS_HEALTH_DB=5          # System health and monitoring

# ============================================================================
# TTA API CONFIGURATION
# ============================================================================

# API Server Settings
API_HOST=0.0.0.0
API_PORT=8080
API_ENVIRONMENT=production

# Database URLs for API
API_REDIS_URL=redis://:TTA_Redis_2024!@localhost:6379
API_NEO4J_URL=bolt://localhost:7687
API_NEO4J_USERNAME=neo4j
API_NEO4J_PASSWORD=TTA_Neo4j_2024!

# ============================================================================
# THERAPEUTIC GAMING CONFIGURATION
# ============================================================================

# Session Management
SESSION_TIMEOUT_MINUTES=30
MAX_CONCURRENT_SESSIONS=100
SESSION_CLEANUP_INTERVAL=300

# Character Management
MAX_CHARACTERS_PER_PLAYER=5
CHARACTER_NAME_MAX_LENGTH=50
CHARACTER_CACHE_TTL=86400

# World Management
WORLD_COMPATIBILITY_THRESHOLD=0.6
WORLD_CACHE_TTL=86400
WORLD_METRICS_INTERVAL=3600

# Progress Tracking
PROGRESS_UPDATE_INTERVAL=300
METRICS_AGGREGATION_INTERVAL=3600
THERAPEUTIC_METRICS_RETENTION_DAYS=90

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# JWT Settings
JWT_SECRET_KEY=TTA_JWT_Secret_Key_Change_In_Production_2024!
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30
JWT_REFRESH_EXPIRE_DAYS=7

# CORS Settings
API_CORS_ORIGINS=http://localhost:3000,https://localhost:3000,http://localhost:8080

# Rate Limiting
API_RATE_LIMIT_CALLS=100
API_RATE_LIMIT_PERIOD=60

# ============================================================================
# MONITORING AND LOGGING
# ============================================================================

# Logging Configuration
LOG_LEVEL=INFO
API_LOG_LEVEL=INFO
DATABASE_LOG_LEVEL=INFO

# Health Monitoring
HEALTH_CHECK_INTERVAL=30
SERVICE_HEALTH_TIMEOUT=10
CONNECTION_RETRY_MAX_ATTEMPTS=5
CONNECTION_RETRY_BASE_DELAY=0.5
CONNECTION_RETRY_MAX_DELAY=8.0

# Metrics Collection
ENABLE_METRICS_COLLECTION=true
METRICS_EXPORT_INTERVAL=60
PERFORMANCE_MONITORING=true

# ============================================================================
# THERAPEUTIC FEATURES
# ============================================================================

# Crisis Detection
CRISIS_DETECTION_ENABLED=true
SAFETY_MONITORING_INTERVAL=300
CRISIS_RESPONSE_TIMEOUT=30

# Therapeutic Settings
DEFAULT_THERAPEUTIC_INTENSITY=medium
THERAPEUTIC_PROGRESS_TRACKING=true
MILESTONE_TRACKING_ENABLED=true

# ============================================================================
# WEBSOCKET CONFIGURATION
# ============================================================================

# WebSocket Settings
WEBSOCKET_ENABLED=true
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_PING_INTERVAL=30
WEBSOCKET_PING_TIMEOUT=10

# Chat Configuration
CHAT_MESSAGE_RETENTION_DAYS=7
CHAT_HISTORY_MAX_MESSAGES=1000
REAL_TIME_UPDATES=true

# ============================================================================
# BACKUP AND MAINTENANCE
# ============================================================================

# Backup Settings
ENABLE_AUTOMATED_BACKUPS=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30

# Maintenance Windows
MAINTENANCE_WINDOW_START=02:00
MAINTENANCE_WINDOW_END=04:00
MAINTENANCE_TIMEZONE=UTC

# ============================================================================
# DOCKER COMPOSE OVERRIDES
# ============================================================================

# Docker Compose Settings (for docker-compose override)
COMPOSE_PROJECT_NAME=tta-live-databases
COMPOSE_FILE=docker-compose.yml

# Container Settings
NEO4J_CONTAINER_NAME=tta-neo4j
REDIS_CONTAINER_NAME=tta-redis

# Volume Settings
NEO4J_DATA_PATH=./data/neo4j/data
NEO4J_LOGS_PATH=./data/neo4j/logs
REDIS_DATA_PATH=./data/redis

# Network Settings
DOCKER_NETWORK_NAME=tta-network
DOCKER_NETWORK_SUBNET=172.20.0.0/16

# ============================================================================
# DEVELOPMENT OVERRIDES
# ============================================================================

# Development-specific settings (can be overridden in local .env)
# Uncomment these for development with live databases

# DEV_ENABLE_DEBUG_LOGGING=true
# DEV_DISABLE_RATE_LIMITING=true
# DEV_ENABLE_CORS_ALL_ORIGINS=true
# DEV_REDUCE_SESSION_TIMEOUT=true

# ============================================================================
# PRODUCTION SECURITY NOTES
# ============================================================================

# IMPORTANT: In production deployment:
# 1. Change all default passwords (NEO4J_PASSWORD, REDIS_PASSWORD, JWT_SECRET_KEY)
# 2. Use environment-specific secrets management
# 3. Enable SSL/TLS for database connections
# 4. Configure proper firewall rules
# 5. Set up monitoring and alerting
# 6. Configure automated backups
# 7. Review and adjust resource limits
# 8. Enable audit logging
# 9. Set up proper access controls
# 10. Configure disaster recovery procedures
